#+TITLE: GitHub Provider with Hy
#+AUTHOR: aygp-dr
#+DATE: 2025-08-20

* Overview

GitHub provider example using Hy to create private repositories with teams and branch protection.
Implements the [0:20-0:30] GitHub Provider Deep Dive pattern with automatic random suffixes.

* Prerequisites

- Python 3.11+ with Hy 1.0.0+
- Pulumi CLI 3.145.0+
- GitHub Personal Access Token
- pulumi-github>=6.0.0 ([[https://pypi.org/project/pulumi-github/][PyPI]])

* Setup

#+begin_src bash
# Install dependencies
gmake setup

# Configure GitHub token in .env
cp .env.example .env
# Edit .env and add your GitHub token

# Select stack
pulumi stack select dev
#+end_src

* Usage

#+begin_src bash
# Quick run (creates repo with teams)
gmake run

# Or step by step:
gmake check   # Verify dependencies
gmake preview # Preview changes
gmake up      # Deploy
gmake destroy # Clean up
#+end_src

* Features

- Creates private repository with random suffix
- Sets up engineering and ops teams
- Configures team permissions (push/admin)
- Adds branch protection to main branch
- Auto-initializes with Python .gitignore and MIT license

* SDK Deep Dive

For exploring the GitHub provider SDK internals:

#+begin_src bash
# The SDK source is available as a submodule
cd ../../research/pulumi-github
# Explore provider implementation, resource definitions, etc.
#+end_src

- SDK Repository: [[https://github.com/pulumi/pulumi-github][pulumi/pulumi-github]]
- Package Documentation: [[https://www.pulumi.com/registry/packages/github/][Pulumi Registry]]
- Python Package: [[https://pypi.org/project/pulumi-github/][PyPI]]

* Note

Converted from TypeScript to Hy for consistency with other experiments.