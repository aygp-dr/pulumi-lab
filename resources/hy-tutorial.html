<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/">

    <title>Tutorial &#8212; Hy 1.0.0 manual</title>
    <link rel="stylesheet" type="text/css" href="/hy/doc/v1.0.0/_static/pygments.css">
    <link rel="stylesheet" type="text/css" href="/hy/doc/v1.0.0/_static/nature.css">
    <link rel="stylesheet" type="text/css" href="/hy/doc/v1.0.0/_static/custom.css">
    
    
    
    
    
    <link rel="index" title="Index" href="/hy/doc/v1.0.0/genindex">
    <link rel="search" title="Search" href="/hy/doc/v1.0.0/search">
    <link rel="next" title="Syntax" href="/hy/doc/v1.0.0/syntax">
    <link rel="prev" title="Versioning and compatibility" href="/hy/doc/v1.0.0/versioning"> 
  <link rel="icon" type="image/png" href="/favicon.png"></head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        
        
        
        <li class="right">
          <a href="/hy/doc/v1.0.0/syntax" title="Syntax" accesskey="N">next</a> |</li>
        <li class="right">
          <a href="/hy/doc/v1.0.0/versioning" title="Versioning and compatibility" accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="/hy/doc/v1.0.0/">Hy 1.0.0 (Afternoon Review) manual</a></li>
         
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this heading">&#182;</a></h1>
<figure class="align-default" id="id1">
<img alt="Karen Rustard's Cuddles" src="/hy/doc/v1.0.0/_images/cuddles-transparent-small.png">
<figcaption>
<p><span class="caption-text">Hy's mascot, Cuddles the cuttlefish.</span><a class="headerlink" href="#id1" title="Permalink to this image">&#182;</a></p>
</figcaption>
</figure>
<p>This chapter provides a quick introduction to Hy. It assumes a basic background
in programming, but no specific prior knowledge of Python or Lisp.</p>
<nav class="contents local" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#lisp-stick-on-a-python" id="id2">Lisp-stick on a Python</a></p></li>
<li><p><a class="reference internal" href="#literals" id="id3">Literals</a></p></li>
<li><p><a class="reference internal" href="#basic-operations" id="id4">Basic operations</a></p></li>
<li><p><a class="reference internal" href="#functions-classes-and-modules" id="id5">Functions, classes, and modules</a></p></li>
<li><p><a class="reference internal" href="#macros" id="id6">Macros</a></p></li>
<li><p><a class="reference internal" href="#recommended-libraries" id="id7">Recommended libraries</a></p></li>
<li><p><a class="reference internal" href="#next-steps" id="id8">Next steps</a></p></li>
</ul>
</nav>
<section id="lisp-stick-on-a-python">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Lisp-stick on a Python</a><a class="headerlink" href="#lisp-stick-on-a-python" title="Permalink to this heading">&#182;</a></h2>
<p>Let's start with the classic:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Hy, world!"</span><span class="p">)</span>
</pre></div>
</div>
<p>This program calls the <a class="reference external" href="https://docs.python.org/3/library/functions.html#print" title="(in Python v3.12)"><code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code></a> function, which, like all of Python's
<a class="reference external" href="https://docs.python.org/3/library/functions.html#built-in-funcs" title="(in Python v3.12)"><span class="xref std std-ref">built-in functions</span></a>, is available in Hy.</p>
<p>All of Python's <a class="reference external" href="https://docs.python.org/3/reference/expressions.html#expressions" title="(in Python v3.12)"><span class="xref std std-ref">binary and unary operators</span></a> are
available, too, although <code class="docutils literal notranslate"><span class="pre">==</span></code> is spelled <code class="docutils literal notranslate"><span class="pre">=</span></code> in deference to Lisp
tradition. Here's how we'd use the addition operator <code class="docutils literal notranslate"><span class="pre">+</span></code>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>This code returns <code class="docutils literal notranslate"><span class="pre">4</span></code>. It's equivalent to <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">3</span></code> in Python and many other
languages. Languages in the <a class="reference external" href="https://en.wikipedia.org/wiki/Lisp_(programming_language)">Lisp</a> family, including
Hy, use a prefix syntax: <code class="docutils literal notranslate"><span class="pre">+</span></code>, just like <code class="docutils literal notranslate"><span class="pre">print</span></code> or <code class="docutils literal notranslate"><span class="pre">sqrt</span></code>, appears before
all of its arguments. The call is delimited by parentheses, but the opening
parenthesis appears before the operator being called instead of after it, so
instead of <code class="docutils literal notranslate"><span class="pre">sqrt(2)</span></code>, we write <code class="docutils literal notranslate"><span class="pre">(sqrt</span> <span class="pre">2)</span></code>. Multiple arguments, such as the
two integers in <code class="docutils literal notranslate"><span class="pre">(+</span> <span class="pre">1</span> <span class="pre">3)</span></code>, are separated by whitespace. Many operators,
including <code class="docutils literal notranslate"><span class="pre">+</span></code>, allow more than two arguments: <code class="docutils literal notranslate"><span class="pre">(+</span> <span class="pre">1</span> <span class="pre">2</span> <span class="pre">3)</span></code> is equivalent to
<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">2</span> <span class="pre">+</span> <span class="pre">3</span></code>.</p>
<p>Here's a more complex example:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">-</span><span class="w"> </span><span class="p">(</span><span class="nf">*</span><span class="w"> </span><span class="p">(</span><span class="nf">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">88</span><span class="p">)</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
<p>This code returns <code class="docutils literal notranslate"><span class="pre">176</span></code>. Why? You can see the infix equivalent with the
command <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">"(-</span> <span class="pre">(*</span> <span class="pre">(+</span> <span class="pre">1</span> <span class="pre">3</span> <span class="pre">88)</span> <span class="pre">2)</span> <span class="pre">8)"</span> <span class="pre">|</span> <span class="pre">hy2py</span></code>, which returns the Python
code corresponding to the given Hy code. Or you can pass the <code class="docutils literal notranslate"><span class="pre">--spy</span></code> option to
Hy when starting the interactive read-eval-print loop (REPL), which shows the
Python equivalent of each input line before the result. The infix equivalent in
this case is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">((</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">88</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">8</span>
</pre></div>
</div>
<p>To evaluate this infix expression, you'd of course evaluate the innermost
parenthesized expression first and work your way outwards. The same goes for
Lisp. Here's what we'd get by evaluating the above Hy code one step at a time:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">-</span><span class="w"> </span><span class="p">(</span><span class="nf">*</span><span class="w"> </span><span class="p">(</span><span class="nf">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">88</span><span class="p">)</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="p">(</span><span class="nf">-</span><span class="w"> </span><span class="p">(</span><span class="nf">*</span><span class="w"> </span><span class="mi">92</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="p">(</span><span class="nf">-</span><span class="w"> </span><span class="mi">184</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="mi">176</span>
</pre></div>
</div>
<p>The basic unit of Lisp syntax, which is similar to a C or Python expression, is
the <strong>form</strong>. <code class="docutils literal notranslate"><span class="pre">92</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, and <code class="docutils literal notranslate"><span class="pre">(*</span> <span class="pre">92</span> <span class="pre">2)</span></code> are all forms. A Lisp program
consists of a sequence of forms nested within forms. Forms are typically
separated from each other by whitespace, but some forms, such as string
literals (<code class="docutils literal notranslate"><span class="pre">"Hy,</span> <span class="pre">world!"</span></code>), can contain whitespace themselves. An
<a class="reference internal" href="/hy/doc/v1.0.0/syntax#expressions"><span class="std std-ref">expression</span></a> is a form enclosed in parentheses; its first
child form, called the <strong>head</strong>, determines what the expression does, and
should generally be a function or macro. <a class="reference external" href="https://docs.python.org/3/glossary.html#term-function" title="(in Python v3.12)"><span class="xref std std-term">Functions</span></a>, the
most ordinary sort of head, constitute reusable pieces of code that can take in
arguments and return a value. Macros (described in more detail <a class="reference internal" href="#tutorial-macros"><span class="std std-ref">below</span></a>) are a special kind of function that's executed at
compile-time and returns code to be executed at run-time.</p>
<p>Comments start with a <code class="docutils literal notranslate"><span class="pre">;</span></code> character and continue till the end of the line. A
comment is functionally equivalent to whitespace.</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">setv </span><span class="nv">password</span><span class="w"> </span><span class="s">"susan"</span><span class="p">)</span><span class="w">   </span><span class="c1">; My daughter's name</span>
</pre></div>
</div>
<p>Although <code class="docutils literal notranslate"><span class="pre">#</span></code> isn't a comment character in Hy, a Hy program can begin with a
<a class="reference internal" href="/hy/doc/v1.0.0/syntax#shebang"><span class="std std-ref">shebang line</span></a>, which Hy itself will ignore:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="o">#</span><span class="nv">!/usr/bin/env</span><span class="w"> </span><span class="nv">hy</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Make me executable, and run me!"</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="literals">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Literals</a><a class="headerlink" href="#literals" title="Permalink to this heading">&#182;</a></h2>
<p>Hy has <a class="reference internal" href="/hy/doc/v1.0.0/syntax#syntax"><span class="std std-ref">literal syntax</span></a> for all of the same data types that
Python does. Here's an example of Hy code for each type and the Python
equivalent.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Hy</p></th>
<th class="head"><p>Python</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">1.2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1.2</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">4j</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4j</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#complex" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">complex</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NoneType</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">"hy"</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'hy'</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">b"hy"</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b'hy'</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">#(1</span> <span class="pre">2</span> <span class="pre">3)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">2,</span> <span class="pre">3)</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">[1</span> <span class="pre">2</span> <span class="pre">3]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">#{1</span> <span class="pre">2</span> <span class="pre">3}</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{1,</span> <span class="pre">2,</span> <span class="pre">3}</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#set" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">{1</span> <span class="pre">2</span>&#160; <span class="pre">3</span> <span class="pre">4}</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{1:</span> <span class="pre">2,</span> <span class="pre">3:</span> <span class="pre">4}</span></code></p></td>
<td><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a></p></td>
</tr>
</tbody>
</table>
<p>The Hy REPL prints output in Hy syntax by default, with the function <a class="reference internal" href="/hy/doc/v1.0.0/api#hy.repr" title="hy.repr"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">hy.repr</span></code></a>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="nv">=&gt;</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>But if you start Hy like this:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="nv">$</span><span class="w"> </span><span class="nv">hy</span><span class="w"> </span><span class="nv">--repl-output-fn=repr</span>
</pre></div>
</div>
<p>the REPL will use Python's native <a class="reference external" href="https://docs.python.org/3/library/functions.html#repr" title="(in Python v3.12)"><code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code></a> function instead, so you'll see values in Python syntax:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="nv">=&gt;</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="k">, </span><span class="mi">2</span><span class="k">, </span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="basic-operations">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Basic operations</a><a class="headerlink" href="#basic-operations" title="Permalink to this heading">&#182;</a></h2>
<p>Set variables with <a class="reference internal" href="/hy/doc/v1.0.0/api#setv" title="setv"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">setv</span></code></a>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">setv </span><span class="nv">zone-plane</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
<p>Access the elements of a list, dictionary, or other data structure with
<a class="reference internal" href="/hy/doc/v1.0.0/api#hy.pyops.get" title="hy.pyops.get"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">get</span></code></a>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">setv </span><span class="nv">fruit</span><span class="w"> </span><span class="p">[</span><span class="s">"apple"</span><span class="w"> </span><span class="s">"banana"</span><span class="w"> </span><span class="s">"cantaloupe"</span><span class="p">])</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="k">get </span><span class="nv">fruit</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span><span class="w">  </span><span class="c1">; =&gt; apple</span>
<span class="p">(</span><span class="kd">setv </span><span class="p">(</span><span class="k">get </span><span class="nv">fruit</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="s">"durian"</span><span class="p">)</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="k">get </span><span class="nv">fruit</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w">  </span><span class="c1">; =&gt; durian</span>
</pre></div>
</div>
<p>Access a range of elements in an ordered structure with
<a class="reference internal" href="/hy/doc/v1.0.0/api#hy.pyops.cut" title="hy.pyops.cut"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">cut</span></code></a>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nf">cut</span><span class="w"> </span><span class="s">"abcdef"</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">4</span><span class="p">))</span><span class="w">  </span><span class="c1">; =&gt; bcd</span>
</pre></div>
</div>
<p>Conditional logic can be built with <a class="reference internal" href="/hy/doc/v1.0.0/api#if" title="if"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">if</span></code></a>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Math works. The universe is safe."</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Math has failed. The universe is doomed."</span><span class="p">))</span>
</pre></div>
</div>
<p>As in this example, <code class="docutils literal notranslate"><span class="pre">if</span></code> is called like <code class="docutils literal notranslate"><span class="pre">(if</span> <span class="pre">CONDITION</span> <span class="pre">THEN</span> <span class="pre">ELSE)</span></code>. It
executes and returns the form <code class="docutils literal notranslate"><span class="pre">THEN</span></code> if <code class="docutils literal notranslate"><span class="pre">CONDITION</span></code> is true (according to
<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) and <code class="docutils literal notranslate"><span class="pre">ELSE</span></code> otherwise.</p>
<p>What if you want to use more than form in place of the <code class="docutils literal notranslate"><span class="pre">THEN</span></code> or <code class="docutils literal notranslate"><span class="pre">ELSE</span></code>
clauses, or in place of <code class="docutils literal notranslate"><span class="pre">CONDITION</span></code>, for that matter? Use the macro
<a class="reference internal" href="/hy/doc/v1.0.0/api#do" title="do"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">do</span></code></a> (known more traditionally in Lisp as <code class="docutils literal notranslate"><span class="pre">progn</span></code>), which combines
several forms into one, returning the last:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">do </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Let's check."</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">do</span>
<span class="w">    </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Math works."</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"The universe is safe."</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">do</span>
<span class="w">    </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Math has failed."</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"The universe is doomed."</span><span class="p">)))</span>
</pre></div>
</div>
<p>For branching on more than one case, try <a class="reference internal" href="/hy/doc/v1.0.0/api#hy.core.macros.cond" title="hy.core.macros.cond"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">cond</span></code></a>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">setv </span><span class="nv">somevar</span><span class="w"> </span><span class="mi">33</span><span class="p">)</span>
<span class="p">(</span><span class="nf">cond</span>
<span class="w">  </span><span class="p">(</span><span class="nf">&gt;</span><span class="w"> </span><span class="nv">somevar</span><span class="w"> </span><span class="mi">50</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"That variable is too big!"</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">&lt;</span><span class="w"> </span><span class="nv">somevar</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"That variable is too small!"</span><span class="p">)</span>
<span class="w">  </span><span class="kc">True</span>
<span class="w">    </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"That variable is jussssst right!"</span><span class="p">))</span>
</pre></div>
</div>
<p>The macro <code class="docutils literal notranslate"><span class="pre">(when</span> <span class="pre">CONDITION</span> <span class="pre">THEN-1</span> <span class="pre">THEN-2</span> <span class="pre">&#8230;)</span></code> is shorthand for <code class="docutils literal notranslate"><span class="pre">(if</span> <span class="pre">CONDITION</span>
<span class="pre">(do</span> <span class="pre">THEN-1</span> <span class="pre">THEN-2</span> <span class="pre">&#8230;)</span> <span class="pre">None)</span></code>.</p>
<p>Hy's basic loops are <a class="reference internal" href="/hy/doc/v1.0.0/api#while" title="while"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">while</span></code></a> and <a class="reference internal" href="/hy/doc/v1.0.0/api#for" title="for"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">for</span></code></a>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">setv </span><span class="nv">x</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="p">(</span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nf">&gt;</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="nv">x</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="kd">setv </span><span class="nv">x</span><span class="w"> </span><span class="p">(</span><span class="nf">-</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="mi">1</span><span class="p">)))</span><span class="w">  </span><span class="c1">; =&gt; 3 2 1</span>

<span class="p">(</span><span class="k">for</span><span class="w"> </span><span class="p">[</span><span class="nv">x</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]]</span>
<span class="w">  </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="nv">x</span><span class="p">))</span><span class="w">         </span><span class="c1">; =&gt; 1 2 3</span>
</pre></div>
</div>
<p>A more functional way to iterate is provided by the comprehension forms such as
<a class="reference internal" href="/hy/doc/v1.0.0/api#lfor" title="lfor"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">lfor</span></code></a>. Whereas <code class="docutils literal notranslate"><span class="pre">for</span></code> always returns <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">lfor</span></code> returns a list
with one element per iteration.</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nf">lfor</span><span class="w">  </span><span class="nv">x</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w">  </span><span class="p">(</span><span class="nf">*</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="mi">2</span><span class="p">)))</span><span class="w">  </span><span class="c1">; =&gt; [2, 4, 6]</span>
</pre></div>
</div>
</section>
<section id="functions-classes-and-modules">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Functions, classes, and modules</a><a class="headerlink" href="#functions-classes-and-modules" title="Permalink to this heading">&#182;</a></h2>
<p>Define named functions with <a class="reference internal" href="/hy/doc/v1.0.0/api#defn" title="defn"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">defn</span></code></a>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">defn </span><span class="nv">fib</span><span class="w"> </span><span class="p">[</span><span class="nv">n</span><span class="p">]</span>
<span class="w">  </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">&lt;</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="nv">n</span>
<span class="w">    </span><span class="p">(</span><span class="nf">+</span><span class="w"> </span><span class="p">(</span><span class="nf">fib</span><span class="w"> </span><span class="p">(</span><span class="nf">-</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="p">(</span><span class="nf">fib</span><span class="w"> </span><span class="p">(</span><span class="nf">-</span><span class="w"> </span><span class="nv">n</span><span class="w"> </span><span class="mi">2</span><span class="p">)))))</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nf">fib</span><span class="w"> </span><span class="mi">8</span><span class="p">))</span><span class="w">  </span><span class="c1">; =&gt; 21</span>
</pre></div>
</div>
<p>Define anonymous functions with <a class="reference internal" href="/hy/doc/v1.0.0/api#fn" title="fn"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">fn</span></code></a>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="p">(</span><span class="kd">fn </span><span class="p">[</span><span class="nv">x</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="nf">%</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span><span class="w"> </span><span class="p">(</span><span class="nb">range</span><span class="w"> </span><span class="mi">10</span><span class="p">))))</span>
<span class="w">  </span><span class="c1">; =&gt; [1, 3, 5, 7, 9]</span>
</pre></div>
</div>
<p>Special symbols in the parameter list of <code class="docutils literal notranslate"><span class="pre">defn</span></code> or <code class="docutils literal notranslate"><span class="pre">fn</span></code> allow you to
indicate optional arguments, provide default values, and collect unlisted
arguments:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">defn </span><span class="nv">test</span><span class="w"> </span><span class="p">[</span><span class="nv">a</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="p">[</span><span class="nv">c</span><span class="w"> </span><span class="kc">None</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="nv">d</span><span class="w"> </span><span class="s">"x"</span><span class="p">]</span><span class="w"> </span><span class="o">#</span><span class="nv">*</span><span class="w"> </span><span class="nv">e</span><span class="p">]</span>
<span class="w">  </span><span class="p">[</span><span class="nv">a</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="nv">c</span><span class="w"> </span><span class="nv">d</span><span class="w"> </span><span class="nv">e</span><span class="p">])</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nf">test</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span><span class="w">            </span><span class="c1">; =&gt; [1, 2, None, 'x', ()]</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nf">test</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">7</span><span class="p">))</span><span class="w">  </span><span class="c1">; =&gt; [1, 2, 3, 4, (5, 6, 7)]</span>
</pre></div>
</div>
<p>Set a function parameter by name with a <code class="docutils literal notranslate"><span class="pre">:keyword</span></code>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">test</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="ss">:d</span><span class="w"> </span><span class="s">"y"</span><span class="p">)</span><span class="w">             </span><span class="c1">; =&gt; [1, 2, None, 'y', ()]</span>
</pre></div>
</div>
<p>Note that unlike Python, Hy doesn't always evaluate function arguments (or the
items in a literal list, or the items in a literal dictionary, etc.) <a class="reference internal" href="/hy/doc/v1.0.0/semantics#order-of-eval"><span class="std std-ref">in
the order they appear in the code</span></a>. But you can always force a
particular evaluation order with <a class="reference internal" href="/hy/doc/v1.0.0/api#do" title="do"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">do</span></code></a>, or with other macros that
provide an implicit <a class="reference internal" href="/hy/doc/v1.0.0/api#do" title="do"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">do</span></code></a>, like <a class="reference internal" href="/hy/doc/v1.0.0/api#hy.core.macros.when" title="hy.core.macros.when"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">when</span></code></a>
or <a class="reference internal" href="/hy/doc/v1.0.0/api#fn" title="fn"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">fn</span></code></a>.</p>
<p>Define classes with <a class="reference internal" href="/hy/doc/v1.0.0/api#defclass" title="defclass"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">defclass</span></code></a>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">defclass </span><span class="nv">FooBar</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="kd">defn </span><span class="nv">__init__</span><span class="w"> </span><span class="p">[</span><span class="bp">self</span><span class="w"> </span><span class="nv">x</span><span class="p">]</span>
<span class="w">    </span><span class="p">(</span><span class="kd">setv </span><span class="bp">self</span><span class="nv">.x</span><span class="w"> </span><span class="nv">x</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="kd">defn </span><span class="nv">get-x</span><span class="w"> </span><span class="p">[</span><span class="bp">self</span><span class="p">]</span>
<span class="w">    </span><span class="bp">self</span><span class="nv">.x</span><span class="p">))</span>
</pre></div>
</div>
<p>Here we create a new instance <code class="docutils literal notranslate"><span class="pre">fb</span></code> of <code class="docutils literal notranslate"><span class="pre">FooBar</span></code> and access its attributes by
various means:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="kd">setv </span><span class="nv">fb</span><span class="w"> </span><span class="p">(</span><span class="nf">FooBar</span><span class="w"> </span><span class="mi">15</span><span class="p">))</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="nv">fb.x</span><span class="p">)</span><span class="w">         </span><span class="c1">; =&gt; 15</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nf">.</span><span class="w"> </span><span class="nv">fb</span><span class="w"> </span><span class="nv">x</span><span class="p">))</span><span class="w">     </span><span class="c1">; =&gt; 15</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nf">.get-x</span><span class="w"> </span><span class="nv">fb</span><span class="p">))</span><span class="w">  </span><span class="c1">; =&gt; 15</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nf">fb.get-x</span><span class="p">))</span><span class="w">   </span><span class="c1">; =&gt; 15</span>
</pre></div>
</div>
<p>Note that syntax like <code class="docutils literal notranslate"><span class="pre">fb.x</span></code> and <code class="docutils literal notranslate"><span class="pre">fb.get-x</span></code> only works when the object
being invoked (<code class="docutils literal notranslate"><span class="pre">fb</span></code>, in this case) is a simple variable name. To get an
attribute or call a method of an arbitrary form <code class="docutils literal notranslate"><span class="pre">FORM</span></code>, you must use the
syntax <code class="docutils literal notranslate"><span class="pre">(.</span> <span class="pre">FORM</span> <span class="pre">x)</span></code> or <code class="docutils literal notranslate"><span class="pre">(.get-x</span> <span class="pre">FORM)</span></code>, or call <a class="reference external" href="https://docs.python.org/3/library/functions.html#getattr" title="(in Python v3.12)"><code class="xref py py-func docutils literal notranslate"><span class="pre">getattr()</span></code></a>.</p>
<p>Access an external module, whether written in Python or Hy, with
<a class="reference internal" href="/hy/doc/v1.0.0/api#import" title="import"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">import</span></code></a>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="k">import </span><span class="nv">math</span><span class="p">)</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nf">math.sqrt</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span><span class="w">  </span><span class="c1">; =&gt; 1.4142135623730951</span>
</pre></div>
</div>
<p>Or use the one-shot import syntax <a class="reference internal" href="/hy/doc/v1.0.0/api#hy.I" title="hy.I"><code class="xref hy hy-class docutils literal notranslate"><span class="pre">hy.I</span></code></a>:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nf">hy.I.math.sqrt</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>Python can import a Hy module like any other module so long as Hy itself has
been imported first, which, of course, must have already happened if you're
running a Hy program.</p>
</section>
<section id="macros">
<span id="tutorial-macros"></span><h2><a class="toc-backref" href="#id6" role="doc-backlink">Macros</a><a class="headerlink" href="#macros" title="Permalink to this heading">&#182;</a></h2>
<p>Macros are the basic metaprogramming tool of Lisp. A macro is a function that
is called at compile time (i.e., when a Hy program is being translated to
Python <a class="reference external" href="https://docs.python.org/3/library/ast.html#module-ast" title="(in Python v3.12)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> objects) and returns code, which becomes part of the final
program. Here's a simple example:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Executing"</span><span class="p">)</span>
<span class="p">(</span><span class="kd">defmacro </span><span class="nv">m</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Now for a slow computation"</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="kd">setv </span><span class="nv">x</span><span class="w"> </span><span class="p">(</span><span class="nf">%</span><span class="w"> </span><span class="p">(</span><span class="nf">**</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="mi">3</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Done computing"</span><span class="p">)</span>
<span class="w">  </span><span class="nv">x</span><span class="p">)</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Value:"</span><span class="w"> </span><span class="p">(</span><span class="nf">m</span><span class="p">))</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Done executing"</span><span class="p">)</span>
</pre></div>
</div>
<p>If you run this program twice in a row, you'll see this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ hy example.hy
Now for a slow computation
Done computing
Executing
Value: 1
Done executing
$ hy example.hy
Executing
Value: 1
Done executing
</pre></div>
</div>
<p>The slow computation is performed while compiling the program on its first
invocation. Only after the whole program is compiled does normal execution
begin from the top, printing "Executing". When the program is called a second
time, it is run from the previously compiled bytecode, which is equivalent to
simply:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Executing"</span><span class="p">)</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Value:"</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="s">"Done executing"</span><span class="p">)</span>
</pre></div>
</div>
<p>Our macro <code class="docutils literal notranslate"><span class="pre">m</span></code> has an especially simple return value, an integer (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>), which at
compile-time is converted to an integer model (<a class="reference internal" href="/hy/doc/v1.0.0/syntax#hy.models.Integer" title="hy.models.Integer"><code class="xref py py-class docutils literal notranslate"><span class="pre">hy.models.Integer</span></code></a>). In general, macros can return
arbitrary Hy models to be executed as code. There are several helper macros that
make it easy to construct forms programmatically, such as <a class="reference internal" href="/hy/doc/v1.0.0/api#quote" title="quote"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">quote</span></code></a>
(<code class="docutils literal notranslate"><span class="pre">'</span></code>), <a class="reference internal" href="/hy/doc/v1.0.0/api#quasiquote" title="quasiquote"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">quasiquote</span></code></a> (<code class="docutils literal notranslate"><span class="pre">`</span></code>), <a class="reference internal" href="/hy/doc/v1.0.0/api#unquote" title="unquote"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">unquote</span></code></a> (<code class="docutils literal notranslate"><span class="pre">~</span></code>),
<a class="reference internal" href="/hy/doc/v1.0.0/api#unquote-splice" title="unquote-splice"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">unquote-splice</span></code></a> (<code class="docutils literal notranslate"><span class="pre">~@</span></code>), and <a class="reference external" href="http://hylang.org/hyrule/doc/v0.7.0/#hyrule.defmacro!" title="(in Hy)"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">defmacro!</span></code></a>. The previous chapter has <a class="reference internal" href="/hy/doc/v1.0.0/whyhy#do-while"><span class="std std-ref">a simple example</span></a> of using <code class="docutils literal notranslate"><span class="pre">`</span></code> and <code class="docutils literal notranslate"><span class="pre">~@</span></code> to define a new control construct
<code class="docutils literal notranslate"><span class="pre">do-while</span></code>.</p>
<p>What if you want to use a macro that's defined in a different module?
<code class="docutils literal notranslate"><span class="pre">import</span></code> won't help, because it merely translates to a Python <code class="docutils literal notranslate"><span class="pre">import</span></code>
statement that's executed at run-time, and macros are expanded at compile-time,
that is, during the translation from Hy to Python. Instead, use <a class="reference internal" href="/hy/doc/v1.0.0/api#require" title="require"><code class="xref hy hy-func docutils literal notranslate"><span class="pre">require</span></code></a>,
which imports the module and makes macros available at compile-time.
<code class="docutils literal notranslate"><span class="pre">require</span></code> uses the same syntax as <code class="docutils literal notranslate"><span class="pre">import</span></code>.</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="nv">some-module.macros</span><span class="p">)</span>
<span class="p">(</span><span class="nf">some-module.macros.rev</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="nv">+</span><span class="p">))</span><span class="w">  </span><span class="c1">; =&gt; 6</span>
</pre></div>
</div>
<p>Hy also supports reader macros, which are similar to ordinary macros, but
operate on raw source text rather than pre-parsed Hy forms. They can choose how
much of the source code to consume after the point they are called, and return
any code. Thus, reader macros can add entirely new syntax to Hy. For example,
you could add a literal notation for Python's <a class="reference external" href="https://docs.python.org/3/library/decimal.html#decimal.Decimal" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">decimal.Decimal</span></code></a> class
like so:</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defreader</span><span class="w"> </span><span class="nv">d</span>
<span class="w">   </span><span class="p">(</span><span class="nf">.slurp-space</span><span class="w"> </span><span class="o">&amp;</span><span class="nv">reader</span><span class="p">)</span>
<span class="w">   </span><span class="o">`</span><span class="p">(</span><span class="nf">hy.I.decimal.Decimal</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="nf">.read-ident</span><span class="w"> </span><span class="o">&amp;</span><span class="nv">reader</span><span class="p">)))</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nb">repr</span><span class="w"> </span><span class="o">#</span><span class="nv">d</span><span class="w"> </span><span class="nv">.1</span><span class="p">))</span><span class="w">          </span><span class="c1">; =&gt; Decimal('0.1')</span>
<span class="p">(</span><span class="k">import </span><span class="nv">fractions</span><span class="w"> </span><span class="p">[</span><span class="nv">Fraction</span><span class="p">])</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nf">Fraction</span><span class="w"> </span><span class="o">#</span><span class="nv">d</span><span class="w"> </span><span class="nv">.1</span><span class="p">))</span><span class="w">      </span><span class="c1">; =&gt; 1/10</span>
<span class="c1">;; Contrast with the normal floating-point .1:</span>
<span class="p">(</span><span class="nb">print</span><span class="w"> </span><span class="p">(</span><span class="nf">Fraction</span><span class="w"> </span><span class="nv">.1</span><span class="p">))</span><span class="w">         </span><span class="c1">; =&gt; 3602879701896397/36028797018963968</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">require</span></code> can pull in a reader macro defined in a different module with
syntax like <code class="docutils literal notranslate"><span class="pre">(require</span> <span class="pre">mymodule</span> <span class="pre">:readers</span> <span class="pre">[d])</span></code>.</p>
</section>
<section id="recommended-libraries">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Recommended libraries</a><a class="headerlink" href="#recommended-libraries" title="Permalink to this heading">&#182;</a></h2>
<p><a class="reference external" href="https://pypi.org/project/hyrule">Hyrule</a> is Hy's standard utility library.
It provides a variety of functions and macros that are useful for writing Hy
programs.</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="k">import </span><span class="nv">hyrule</span><span class="w"> </span><span class="p">[</span><span class="nv">inc</span><span class="p">])</span>
<span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="p">(</span><span class="nb">map</span><span class="w"> </span><span class="nb">inc </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]))</span><span class="w">       </span><span class="c1">; =&gt; [2 3 4]</span>
<span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="nv">hyrule</span><span class="w"> </span><span class="p">[</span><span class="nv">case</span><span class="p">])</span>
<span class="p">(</span><span class="kd">setv </span><span class="nv">x</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="nf">case</span><span class="w"> </span><span class="nv">x</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="s">"a"</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="s">"b"</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="s">"c"</span><span class="p">)</span><span class="w">  </span><span class="c1">; =&gt; "b"</span>
</pre></div>
</div>
<p><a class="reference external" href="https://pypi.org/project/toolz/">toolz</a> and its Cython variant <a class="reference external" href="https://pypi.org/project/cytoolz/">cytoolz</a> provide lots of utilities for functional
programming and working with iterables.</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="k">import </span><span class="nv">toolz</span><span class="w"> </span><span class="p">[</span><span class="nv">partition</span><span class="p">])</span>
<span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="p">(</span><span class="nf">partition</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="p">]))</span>
<span class="w">  </span><span class="c1">; =&gt; [#(1 2) #(3 4) #(5 6)]</span>
</pre></div>
</div>
<p><a class="reference external" href="https://pypi.org/project/metadict/">metadict</a> allows you to refer to the
elements of a dictionary as attributes. This is handy when frequently referring
to elements with constant strings as keys, since plain indexing is a bit
verbose in Hy.</p>
<div class="highlight-hylang notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="k">import </span><span class="nv">metadict</span><span class="w"> </span><span class="p">[</span><span class="nv">MetaDict</span><span class="p">])</span>
<span class="p">(</span><span class="kd">setv </span><span class="nv">d</span><span class="w"> </span><span class="p">(</span><span class="nf">MetaDict</span><span class="p">))</span>
<span class="p">(</span><span class="kd">setv </span><span class="nv">d.foo</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">       </span><span class="c1">; i.e., (setv (get d "foo") 1)</span>
<span class="nv">d.foo</span><span class="w">                </span><span class="c1">; i.e., (get d "foo")</span>
<span class="w">  </span><span class="c1">; =&gt; 1</span>
<span class="p">(</span><span class="nb">list</span><span class="w"> </span><span class="p">(</span><span class="nf">.keys</span><span class="w"> </span><span class="nv">d</span><span class="p">))</span>
<span class="w">  </span><span class="c1">; =&gt; ["foo"]</span>
</pre></div>
</div>
</section>
<section id="next-steps">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Next steps</a><a class="headerlink" href="#next-steps" title="Permalink to this heading">&#182;</a></h2>
<p>You now know enough to be dangerous with Hy. You may now smile villainously and
sneak off to your Hydeaway to do unspeakable things.</p>
<p>Refer to Python's documentation for the details of Python semantics. In
particular, <a class="reference external" href="https://docs.python.org/3/tutorial/index.html#tutorial-index" title="(in Python v3.12)"><span class="xref std std-ref">the Python tutorial</span></a> can be helpful even if
you have no interest in writing your own Python code, because it will introduce
you to the semantics, and you'll need a reading knowledge of Python syntax to
understand example code for Python libraries.</p>
<p>Refer to the rest of this manual for Hy-specific features. See <a class="reference external" href="https://github.com/hylang/hy/wiki/Compatibility-tips">the wiki</a> for tips
on getting Hy to work with other software. For an official full-blown example
Hy program, see <a class="reference external" href="http://hylang.org/simalq">Infinitesimal Quest 2 + &#949;</a>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2024 the authors.
    </div>
  </body>
</html>